
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.2.0)

2025-09-18T14:19:11.630+09:00  INFO 63899 --- [kintai] [           main] com.kintai.KintaiApplication             : Starting KintaiApplication v0.0.1-SNAPSHOT using Java 17.0.16 with PID 63899 (/Users/keigofujita/kintai/target/kintai-0.0.1-SNAPSHOT.jar started by keigofujita in /Users/keigofujita/kintai)
2025-09-18T14:19:11.631+09:00 DEBUG 63899 --- [kintai] [           main] com.kintai.KintaiApplication             : Running with Spring Boot v3.2.0, Spring v6.1.1
2025-09-18T14:19:11.631+09:00  INFO 63899 --- [kintai] [           main] com.kintai.KintaiApplication             : No active profile set, falling back to 1 default profile: "default"
2025-09-18T14:19:12.078+09:00  INFO 63899 --- [kintai] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-09-18T14:19:12.101+09:00  INFO 63899 --- [kintai] [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 4 JPA repository interfaces.
2025-09-18T14:19:12.541+09:00  INFO 63899 --- [kintai] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-09-18T14:19:12.546+09:00  INFO 63899 --- [kintai] [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-09-18T14:19:12.546+09:00  INFO 63899 --- [kintai] [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.16]
2025-09-18T14:19:12.563+09:00  INFO 63899 --- [kintai] [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-09-18T14:19:12.563+09:00  INFO 63899 --- [kintai] [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 896 ms
2025-09-18T14:19:12.631+09:00  INFO 63899 --- [kintai] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-09-18T14:19:12.749+09:00  INFO 63899 --- [kintai] [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA
2025-09-18T14:19:12.750+09:00  INFO 63899 --- [kintai] [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-09-18T14:19:12.754+09:00  INFO 63899 --- [kintai] [           main] o.s.b.a.h2.H2ConsoleAutoConfiguration    : H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:testdb'
2025-09-18T14:19:12.801+09:00 DEBUG 63899 --- [kintai] [           main] o.s.w.f.ServerHttpObservationFilter      : Filter 'webMvcObservationFilter' configured for use
2025-09-18T14:19:12.847+09:00  INFO 63899 --- [kintai] [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-09-18T14:19:12.869+09:00  INFO 63899 --- [kintai] [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.3.1.Final
2025-09-18T14:19:12.883+09:00  INFO 63899 --- [kintai] [           main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-09-18T14:19:12.969+09:00  INFO 63899 --- [kintai] [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-09-18T14:19:12.987+09:00  WARN 63899 --- [kintai] [           main] org.hibernate.orm.deprecation            : HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-09-18T14:19:13.304+09:00  INFO 63899 --- [kintai] [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
Hibernate: 
    drop table if exists attendance_records cascade 
Hibernate: 
    drop table if exists employees cascade 
Hibernate: 
    drop table if exists user_accounts cascade 
Hibernate: 
    drop table if exists vacation_requests cascade 
Hibernate: 
    create table attendance_records (
        attendance_date date not null,
        attendance_fixed_flag BOOLEAN DEFAULT FALSE not null,
        early_leave_minutes INT DEFAULT 0 not null,
        late_minutes INT DEFAULT 0 not null,
        night_shift_minutes INT DEFAULT 0 not null,
        overtime_minutes INT DEFAULT 0 not null,
        attendance_id bigint generated by default as identity,
        clock_in_time timestamp(6),
        clock_out_time timestamp(6),
        created_at timestamp(6) not null,
        employee_id bigint not null,
        updated_at timestamp(6) not null,
        attendance_status varchar(255) not null check (attendance_status in ('NORMAL','LATE','EARLY_LEAVE','LATE_AND_EARLY_LEAVE','OVERTIME','NIGHT_SHIFT','ABSENT')),
        primary key (attendance_id)
    )
Hibernate: 
    create table employees (
        hire_date date not null,
        is_active BOOLEAN DEFAULT TRUE not null,
        retirement_date date,
        created_at timestamp(6) not null,
        employee_id bigint generated by default as identity,
        updated_at timestamp(6) not null,
        email varchar(255) not null unique,
        employee_code varchar(255) not null unique,
        first_name varchar(255) not null,
        last_name varchar(255) not null,
        primary key (employee_id)
    )
Hibernate: 
    create table user_accounts (
        enabled boolean not null,
        employee_id bigint not null,
        id bigint generated by default as identity,
        password varchar(255) not null,
        role varchar(255) not null check (role in ('EMPLOYEE','ADMIN')),
        username varchar(255) not null unique,
        primary key (id)
    )
Hibernate: 
    create table vacation_requests (
        days integer not null,
        end_date date not null,
        start_date date not null,
        created_at timestamp(6) not null,
        employee_id bigint not null,
        updated_at timestamp(6) not null,
        vacation_id bigint generated by default as identity,
        reason varchar(255),
        status varchar(255) not null check (status in ('PENDING','APPROVED','REJECTED')),
        primary key (vacation_id)
    )
2025-09-18T14:19:13.324+09:00  INFO 63899 --- [kintai] [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    select
        ua1_0.id,
        ua1_0.employee_id,
        ua1_0.enabled,
        ua1_0.password,
        ua1_0.role,
        ua1_0.username 
    from
        user_accounts ua1_0
Hibernate: 
    insert 
    into
        user_accounts
        (employee_id, enabled, password, role, username, id) 
    values
        (?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        user_accounts
        (employee_id, enabled, password, role, username, id) 
    values
        (?, ?, ?, ?, ?, default)
Hibernate: 
    insert 
    into
        user_accounts
        (employee_id, enabled, password, role, username, id) 
    values
        (?, ?, ?, ?, ?, default)
2025-09-18T14:19:13.791+09:00  INFO 63899 --- [kintai] [           main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-09-18T14:19:14.107+09:00  WARN 63899 --- [kintai] [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-09-18T14:19:14.229+09:00 DEBUG 63899 --- [kintai] [           main] s.w.s.m.m.a.RequestMappingHandlerMapping : 14 mappings in 'requestMappingHandlerMapping'
2025-09-18T14:19:14.283+09:00 DEBUG 63899 --- [kintai] [           main] o.s.w.s.handler.SimpleUrlHandlerMapping  : Patterns [/webjars/**, /**] in 'resourceHandlerMapping'
2025-09-18T14:19:14.334+09:00  INFO 63899 --- [kintai] [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 1 endpoint(s) beneath base path '/actuator'
2025-09-18T14:19:14.345+09:00  INFO 63899 --- [kintai] [           main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@102e8217, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3a6f77a4, org.springframework.security.web.context.SecurityContextHolderFilter@3cbcd442, org.springframework.security.web.header.HeaderWriterFilter@3cc8f1c, org.springframework.web.filter.CorsFilter@7876ba81, org.springframework.security.web.csrf.CsrfFilter@5a1dda88, org.springframework.security.web.authentication.logout.LogoutFilter@69bb8812, org.springframework.security.web.session.ConcurrentSessionFilter@6b1be058, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6b1bacf5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@310d05c5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@49c83038, org.springframework.security.web.session.SessionManagementFilter@7497471b, org.springframework.security.web.access.ExceptionTranslationFilter@54af73bd, org.springframework.security.web.access.intercept.AuthorizationFilter@59e89013]
2025-09-18T14:19:14.395+09:00 DEBUG 63899 --- [kintai] [           main] s.w.s.m.m.a.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-09-18T14:19:14.411+09:00 DEBUG 63899 --- [kintai] [           main] .m.m.a.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 0 @ExceptionHandler, 1 ResponseBodyAdvice
2025-09-18T14:19:14.544+09:00  INFO 63899 --- [kintai] [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path ''
2025-09-18T14:19:14.553+09:00  INFO 63899 --- [kintai] [           main] com.kintai.KintaiApplication             : Started KintaiApplication in 3.111 seconds (process running for 3.303)
2025-09-18T14:19:31.533+09:00  INFO 63899 --- [kintai] [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-09-18T14:19:31.533+09:00  INFO 63899 --- [kintai] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-09-18T14:19:31.533+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected StandardServletMultipartResolver
2025-09-18T14:19:31.533+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected AcceptHeaderLocaleResolver
2025-09-18T14:19:31.533+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected FixedThemeResolver
2025-09-18T14:19:31.534+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2f815a12
2025-09-18T14:19:31.534+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Detected org.springframework.web.servlet.support.SessionFlashMapManager@51f39482
2025-09-18T14:19:31.534+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-09-18T14:19:31.534+09:00  INFO 63899 --- [kintai] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-09-18T14:19:31.545+09:00  WARN 63899 --- [kintai] [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/api/attendance/health' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2025-09-18T14:19:31.554+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : GET "/api/attendance/health", parameters={}
2025-09-18T14:19:31.555+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-1] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.kintai.controller.AttendanceController#health()
2025-09-18T14:19:31.571+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'text/plain', given [*/*] and supported [text/plain, */*, application/json, application/*+json]
2025-09-18T14:19:31.572+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-1] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing ["勤怠管理システムは正常に動作しています"]
2025-09-18T14:19:31.576+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-09-18T14:19:35.039+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : POST "/api/auth/login", parameters={}
2025-09-18T14:19:35.040+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-2] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.kintai.controller.AuthController#login(LoginRequest, HttpServletRequest)
2025-09-18T14:19:35.063+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-2] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [com.kintai.controller.AuthController$LoginRequest@2f0f34e9]
Hibernate: 
    select
        ua1_0.id,
        ua1_0.employee_id,
        ua1_0.enabled,
        ua1_0.password,
        ua1_0.role,
        ua1_0.username 
    from
        user_accounts ua1_0 
    where
        ua1_0.username=? 
        and ua1_0.enabled=?
2025-09-18T14:19:35.138+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-18T14:19:35.139+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-2] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{role=EMPLOYEE, success=true, employeeId=2, sessionId=17E73731E51DFAB6ED534A122327EF3C, message=ログイン (truncated)...]
2025-09-18T14:19:35.143+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-09-18T14:19:37.642+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : GET "/api/attendance/csrf-token", parameters={}
2025-09-18T14:19:37.643+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-4] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.kintai.controller.AttendanceController#getCsrfToken(HttpServletRequest)
2025-09-18T14:19:37.647+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-18T14:19:37.647+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-4] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [org.springframework.security.web.csrf.CsrfTokenRequestAttributeHandler$SupplierCsrfToken@1f452107]
2025-09-18T14:19:37.651+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-4] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
2025-09-18T14:19:41.967+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : POST "/api/attendance/clock-in", parameters={}
2025-09-18T14:19:41.968+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-6] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.kintai.controller.AttendanceController#clockIn(ClockInRequest)
2025-09-18T14:19:41.973+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-6] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [com.kintai.dto.ClockInRequest@716f9f4b]
Hibernate: 
    select
        e1_0.employee_id,
        e1_0.created_at,
        e1_0.email,
        e1_0.employee_code,
        e1_0.first_name,
        e1_0.hire_date,
        e1_0.is_active,
        e1_0.last_name,
        e1_0.retirement_date,
        e1_0.updated_at 
    from
        employees e1_0 
    where
        e1_0.employee_id=?
2025-09-18T14:19:41.984+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-18T14:19:41.984+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-6] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.kintai.dto.ClockResponse@238a3366]
2025-09-18T14:19:41.985+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-6] o.s.web.servlet.DispatcherServlet        : Completed 400 BAD_REQUEST
2025-09-18T14:19:49.642+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : POST "/api/attendance/clock-in", parameters={}
2025-09-18T14:19:49.642+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-7] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.kintai.controller.AttendanceController#clockIn(ClockInRequest)
2025-09-18T14:19:49.643+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-7] m.m.a.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [com.kintai.dto.ClockInRequest@7c5eac9d]
Hibernate: 
    select
        e1_0.employee_id,
        e1_0.created_at,
        e1_0.email,
        e1_0.employee_code,
        e1_0.first_name,
        e1_0.hire_date,
        e1_0.is_active,
        e1_0.last_name,
        e1_0.retirement_date,
        e1_0.updated_at 
    from
        employees e1_0 
    where
        e1_0.employee_id=?
2025-09-18T14:19:49.645+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-18T14:19:49.645+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-7] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [com.kintai.dto.ClockResponse@4f1e8840]
2025-09-18T14:19:49.646+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-7] o.s.web.servlet.DispatcherServlet        : Completed 400 BAD_REQUEST
2025-09-18T14:19:52.896+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : GET "/api/auth/session", parameters={}
2025-09-18T14:19:52.897+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-8] s.w.s.m.m.a.RequestMappingHandlerMapping : Mapped to com.kintai.controller.AuthController#getSession(HttpServletRequest)
2025-09-18T14:19:52.897+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2025-09-18T14:19:52.897+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-8] o.s.w.s.m.m.a.HttpEntityMethodProcessor  : Writing [{authenticated=true, role=EMPLOYEE, employeeId=2, sessionId=17E73731E51DFAB6ED534A122327EF3C, userna (truncated)...]
2025-09-18T14:19:52.898+09:00 DEBUG 63899 --- [kintai] [nio-8080-exec-8] o.s.web.servlet.DispatcherServlet        : Completed 200 OK
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            2025-09-18T14:19:11.967+09:00  INFO 58252 --- [kintai] [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
Hibernate: 
    drop table if exists attendance_records cascade 
Hibernate: 
    drop table if exists employees cascade 
Hibernate: 
    drop table if exists user_accounts cascade 
Hibernate: 
    drop table if exists vacation_requests cascade 
2025-09-18T14:19:11.974+09:00  INFO 58252 --- [kintai] [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-09-18T14:19:11.976+09:00  INFO 58252 --- [kintai] [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
